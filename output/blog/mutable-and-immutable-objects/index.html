<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CYPVPEJ4PK"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CYPVPEJ4PK');

  </script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>Mutable and Immutable Objects | Python For The Lab</title>

  <meta name="tags" content="Data, Types, Mutable, Immutable, Objects, ">
  <meta name="description" content="Understanding the differences in data types to make better programs">
  <meta name="author" content="Aquiles Carattino">
  <link rel="canonical" href="https://pythonforthelab.com/blog/mutable-and-immutable-objects">

  <!-- Open Graph / Facebook -->
  <meta property="og:site_name" content="Python for the Lab">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://pythonforthelab.com/blog/mutable-and-immutable-objects">
  <meta property="og:title" content="Mutable and Immutable Objects">
  <meta property="og:description" content="Understanding the differences in data types to make better programs">
  <meta property="og:image" content="/images/rawpixel-274862-unsplash_linkedin.width-800.jpg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://pythonforthelab.com/blog/mutable-and-immutable-objects">
  <meta property="twitter:title" content="Mutable and Immutable Objects">
  <meta property="twitter:description" content="Understanding the differences in data types to make better programs">
  <meta property="twitter:image" content="/images/rawpixel-274862-unsplash_linkedin.width-800.jpg">
  <meta name="twitter:creator" content="@aquicarattino">

  <link rel="apple-touch-icon" sizes="57x57"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"
        href="https://pythonforthelab.com/theme/css/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32"
        href="https://pythonforthelab.com/theme/css/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96"
        href="https://pythonforthelab.com/theme/css/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16"
        href="https://pythonforthelab.com/theme/css/favicon/favicon-16x16.png">
  <link rel="manifest" href="https://pythonforthelab.com/theme/css/favicon/manifest.json"/>
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://pythonforthelab.com/theme/css/favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link
      href="https://fonts.googleapis.com/css2?family=Markazi+Text:wght@400;700&family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;700&display=swap"
      rel="stylesheet">

  <link rel="stylesheet" href="https://files.stork-search.net/basic.css"/>
  <link rel="stylesheet" href="https://pythonforthelab.com/theme/css/tw_style.css">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://https://pythonforthelab.com/feed.rss">	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="https://pythonforthelab.com/theme/js/jquery-migrate-1.2.1.js"></script>

	<script src="https://pythonforthelab.com/theme/js/functions.js"></script>  <link rel="stylesheet" href="https://pythonforthelab.com/theme/css/prism.css"/>
</head>

<body class="text-gray-800">
  <header class="relative bg-gray-800 md:h-80 lg:flex h-64">
    <div class="lg:flex-col lg:lg:w-[880px] lg:ml-16">
      <nav class="lg:pr-8 w-full lg:pt-4">
        <div class="flex p-3 items-center justify-between">
          <a class="flex-none" href="https://pythonforthelab.com">
            <img id="site-logo" class="h-12"
                 src="https://pythonforthelab.com/theme/css/images/logo-red.svg"/>
          </a>
          <div id="menu_sm"
               class="pr-0 pl-4 grow hidden lg:block">
<ul
        class="w-full font-semibold text-3xl lg:flex lg:pl-16 lg:text-white md:text-base md:font-medium z-50">
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/blog"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Blog</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/courses"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Courses</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/hire-me"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Hire Me</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/books"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Books</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/about"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">About</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://github.com/PFTL/pftl_discussions/discussions"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Forum</span>
        </a>
    </li>
    <li class="pt-4 md:hidden">
        <form action="#" class="w-full pr-8">
            <label for="search" class="relative block">
                <img class="absolute w-4 h-4 top-1/2 -translate-y-1/2 left-3"
                     src="https://pythonforthelab.com/theme/css/images/search.svg">
                <input id="search" data-stork="sitesearch" type="text"
                       class="text-base placeholder-gray-500 pl-10 py-4 w-full shadow-sm ring-1 ring-inset ring-gray-300 focus:border-2 focus:border-red-500 focus:ring-red-500"
                       placeholder="Type to Search">
            </label>
        </form>
        <div data-stork="sitesearch-output"></div>
    </li>
</ul>          </div>
          <div class="">
            <button id="menu-button" class="z-50 border-1 border-red-500 lg:hidden">
              <img id="hamburger" src="https://pythonforthelab.com/theme/css/images/hamburger.svg"
                   class="h-8 w-8"/>
            </button>
          </div>
        </div>
        <div id="menu"
             class="pr-0 pb-8 mx-0 pt-8 pl-12 basis-full grow bg-white z-30 min-w-full hidden drop-shadow-lg border-b-8 border-b-red-700">
<ul
        class="w-full font-semibold text-3xl md:grid md:grid-cols-6 md:px-16 md:text-base md:font-medium">
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/blog"
           class="before:content-blogIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Blog</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/courses"
           class="before:content-coursesIcon md:w-full
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Courses</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/hire-me"
           class="before:content-hireIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Hire Me</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/books"
           class="before:content-booksIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Books</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/about"
           class="before:content-aboutIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">About</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://github.com/PFTL/pftl_discussions/discussions"
           class="before:content-forumIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Forum</span>
        </a>
    </li>
    <li class="pt-4 md:hidden">
        <form action="#" class="w-full pr-8">
            <label for="search" class="relative block">
                <img class="absolute w-4 h-4 top-1/2 -translate-y-1/2 left-3"
                     src="https://pythonforthelab.com/theme/css/images/search.svg">
                <input id="search" data-stork="sitesearch" type="text"
                       class="text-base placeholder-gray-500 pl-10 py-4 w-full shadow-sm ring-1 ring-inset ring-gray-300 focus:border-2 focus:border-red-500 focus:ring-red-500"
                       placeholder="Type to Search">
            </label>
        </form>
        <div data-stork="sitesearch-output"></div>
    </li>
</ul>        </div>
      </nav>
      <div class="md:flex text-gray-200 lg:min-w-full lg:pt-4 pb-8">
      </div>
    </div>
    <div class="hidden lg:block lg:w-72 ml-1 pl-2 mr-2 pt-4 w-72">
      <div class="mb-8 shadow-2xl">
        <form action="#" class="w-full pr-8 pt-4 text-xs">
          <label for="search" class="relative block">
            <img class="absolute w-4 h-4 top-1/2 -translate-y-1/2 left-3"
                 src="https://pythonforthelab.com/theme/css/images/search.svg">
            <input id="search" data-stork="sitesearch" type="text"
                   class="text-gray-800 pl-10 bg-white py-2 placeholder-gray-500 w-full border border-gray-600"
                   placeholder="Type to Search">
          </label>
        </form>
        <div data-stork="sitesearch-output"></div>
      </div>
      <div class="py-2 shadow-2xl">
        <div class="text-gray-300">
          <span class="font-semibold text-sm">Get all the information directly to your inbox.</span>
        </div>
        <div id="mc_embed_signup" class="">
          <form
              action="https://pythonforthelab.us21.list-manage.com/subscribe/post?u=f0d9bfa6188cdcc67890a07f6&amp;id=8a0ca536e8&amp;f_id=00dfebe6f0"
              method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form"
              class="validate my-3 md:max-w-lg"
              target="_self" novalidate="">
            <div class="field-wp">
              <input type="email" name="EMAIL" placeholder="Your E-Mail" id="mce-EMAIL" required=""
                     value=""
                     class="required email bg-white ring-red-500 p-2 w-full md:max-w-2/3">
            </div>
            <div id="mce-responses" class="clear foot">
              <div class="response" id="mce-error-response" style="display: none;"></div>
              <div class="response" id="mce-success-response" style="display: none;"></div>
            </div>
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
              /* real people should not fill this in and expect good things - do not remove this or risk
              form
              bot
              signups */
              <input type="text" name="b_f0d9bfa6188cdcc67890a07f6_8a0ca536e8" tabindex="-1" value="">
            </div>
            <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"
                   class="bg-emerald-500 hover:scale-105 focus:bg-emerald-300 text-white p-4 mt-2 w-full md:max-w-2/3">
          </form>
          <span class="text-gray-400 text-xs">Unsubscribe any time.</span>
        </div>
      </div>
    </div>
  </header>

  <div class="lg:mx-auto lg:flex lg:ml-16">

    <div id="col-left" class="md:content-stretch lg:w-[880px]">
      <div class="relative text-gray-800 mx-2 z-40">
        <div class="md:-mt-32 lg:-mt-56 -mt-36 lg:mb-8">
          <img src="/images/rawpixel-274862-unsplash_linkedin.width-800.jpg" alt="Mutable and Immutable Objects" class="shadow-md lg:shadow-lg"/>
        </div>
        <h1 class="font-serif font-extrabold text-4xl leading-tight pb-2">Mutable and Immutable Objects</h1>
        <div class="font-sans font-bold text-xl">Understanding the differences in data types to make better programs</div>
        <div class="text-sm text-gray-400">
          <span
              class="inline-block before:inline-block before:mx-1 before:align-middle before:h-4 before:w-4 before:content-profile mr-1 pr-1 py-1">Aquiles Carattino</span>
              class="inline-block before:inline-block before:mx-1 before:align-middle before:h-4 before:w-4 before:content-calendar mr-1 pr-1 py-1">2018-08-23</span>
          <span
              class="inline-block before:inline-block before:mx-1 before:align-middle before:h-4 before:w-4 before:content-tag mr-1 pr-1 py-1">
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Data</span>
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Types</span>
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Mutable</span>
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Immutable</span>
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Objects</span>
        </span>
        </div>
      </div>

      <div class="article-content mt-4 mx-2">
        <main>
          <p>People who start programming in Python quickly stumble upon the
existence of lists and tuples. They are defined in a similar way, they
look the same. Sometimes they are even used interchangeably. The obvious
question is, therefore, why do you have two different types of elements
for the same goal? The answer lays in understanding the differences
between <strong>mutable</strong> and <strong>immutable</strong> data types in Python.</p>
<p>Even after programming Python applications for a while, being conscious
about choosing lists or tuples is hard, and sometimes the implications
give rise to obscure bugs, very hard to find and correct. In this
article, we are going to discuss about the differences between lists and
tuples, or more generally about mutable and immutable data types and how
they can be used in your programs.</p>
<h2>Lists and Tuples</h2>
<p>In Python, when you want to define a list, you can simply do the
following:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 = [1, 2, 3]
</code></pre>
<p>And you can address its elements by the position:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1[0]
1
&gt;&gt;&gt; var[1]
2
</code></pre>
<p>If you want to replace the value of an element, you can do the
following:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1[0] = 0
&gt;&gt;&gt; var1[0]
0
</code></pre>
<p>You can do the same with a tuple, which uses <code>()</code> instead of <code>[]</code> in its
definition:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var2 = (1, 2, 3)
&gt;&gt;&gt; var2[0]
1
</code></pre>
<p>However, if you try to change the value of an element you will get an
error:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var2[0] = 0
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: 'tuple' object does not support item assignment
</code></pre>
<p>This is the first, crucial difference between a list and a tuple. Once
defined, tuples cannot change their values. So, when would you use one
or the other depends on the application. The main difference between
them is that tuples are very fast when you need to access their values,
but lists are much more memory efficient if you would like to expand
them.</p>
<p>When you have a variable that cannot be changed after it has been
created it is called <strong>immutable</strong>, while in the opposite case, that
variable is called <strong>mutable</strong>. Let's explore what that means.</p>
<h2>Mutable and Immutable Data Types</h2>
<p>There is an <a href="https://standupdev.com/wiki/doku.php?id=python_tuples_are_immutable_but_may_change">excellent article written by Luciano
Ramalho</a>
in which he explains how to understand variables in Python. I am not
going to copy his article, but I think it is a great inspiration on how
to explain things. What he suggests is to think about labels and not
about boxes when referring to variables. A variable is a label that we
assign to an object, it is the way we, as humans, have to identify it.
However, what is important about the underlying object is its value and
its type.</p>
<p>A great tool in Python to understand this concept is the <code>id</code> function.
We can apply it to any variable and it will return its identity. If we
want to be sure about dealing with the same object, we can check whether
the value returned by <code>id</code> is the same. It is possible to think about
the integer that is being returned as the address in memory that is
assigned to the object. So, for example, we can do the following:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 = [1, 2, 3]
&gt;&gt;&gt; var2 = (1, 2, 3)
&gt;&gt;&gt; id(var1)
44045192
&gt;&gt;&gt; id(var2)
43989032
</code></pre>
<p>It is easy to see that both variables have different identities. Now we
can expand both the list and the tuple with some new values and check
whether their identities are the same:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 += [4, 5]
&gt;&gt;&gt; var2 += (4, 5)
&gt;&gt;&gt; print(var1)
[1, 2, 3, 4, 5]
&gt;&gt;&gt; print(var2)
(1, 2, 3, 4, 5)
&gt;&gt;&gt; id(var1)
44045192
&gt;&gt;&gt; id(var2)
30323024
</code></pre>
<p>What you see in the code above is that we have appended the same values
to both the list (<code>var1</code>) and the tuple (<code>var2</code>). If we ask for the id
of them, you will notice that <code>var1</code> has the same identity as before,
while <code>var2</code> has a new identity. This means that we have expanded the
list, but created a completely new tuple. This is why memory management
is more efficient for lists than for tuples.</p>
<p>Tuples are not the only immutable data type in Python, but they are a
great tool to learn because they can be directly compared to lists,
which are mutable. Other immutable data types are:</p>
<ol>
<li>int</li>
<li>float</li>
<li>decimal</li>
<li>complex</li>
<li>bool</li>
<li>string</li>
<li>tuple</li>
<li>range</li>
<li>frozenset</li>
<li>bytes</li>
</ol>
<p>Most likely you haven't thought about it before, but when you assign an
integer, float, etc. to a variable, it can't be replaced. So for
example, you will get an output like this if you check the identity of
an integer assigned to a variable:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 = 1
&gt;&gt;&gt; id(var1)
1644063776
&gt;&gt;&gt; var1 += 1
&gt;&gt;&gt; id(var1)
1644063808
</code></pre>
<p>You see that a completely new <code>var1</code> is created when you add a value to
itself, therefore its identity changes. The same would happen with all
the other data types listed above. <strong>Mutable</strong> objects, on the other
hand, are the following:</p>
<ol>
<li>list</li>
<li>dictionary</li>
<li>set</li>
<li>bytearray</li>
<li>user defined classes</li>
</ol>
<p>Those are the kind of objects that can be changed in-place, without
creating a new one to store the updated values. An interesting case
happens when you give two names to the same variable, for example:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 = [0, 1, 2]
&gt;&gt;&gt; var2 = var1
&gt;&gt;&gt; id(var1)
44372872
&gt;&gt;&gt; id(var2)
44372872
</code></pre>
<p>Both <code>var1</code> and <code>var2</code> have the same identity, this means that they are
labels to the same object. You can check it by using <code>is</code>:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 is var2
True
</code></pre>
<p>And if you update one of the values of <code>var1</code>:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 += [3, 4, 5]
&gt;&gt;&gt; print(var2)
[0, 1, 2, 3, 4, 5]
&gt;&gt;&gt; var1 is var2
True
</code></pre>
<p>You see that you updated the value of <code>var1</code> and the value of <code>var2</code>
also changed. This happens only with mutable types. With immutable
objects, since a new object is created in order to update a value, then
each name will be pointing to a different object. For example, with
strings:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 = 'abc'
&gt;&gt;&gt; var2 = var1
&gt;&gt;&gt; var1 is var2
True
&gt;&gt;&gt; var1 += 'def'
&gt;&gt;&gt; var1 is var2
False
</code></pre>
<p>Sometimes you would like to compare whether two variables have the same
values, and not if they point to the same object. For this, you can use
the <code>==</code> operator. Let's define two lists (or two tuples) with the same
values:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 = [1, 2, 3]
&gt;&gt;&gt; var2 = [1, 2, 3]
</code></pre>
<p>If you check whether <code>var1</code> and <code>var2</code> are the same object, you will get
a negative answer:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 is var2
False
</code></pre>
<p>Which is logical, because they have the same values, but they are two
distinct objects. If you want to compare their values instead, you can
do the following:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; var1 == var2
True
</code></pre>
<p>An interesting thing happens when you use the so-called singletons.
Let's quickly see an example:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; a = 1
&gt;&gt;&gt; b = 1
&gt;&gt;&gt; a is 1
True
&gt;&gt;&gt; a is b
True
&gt;&gt;&gt; a == b
True
</code></pre>
<p>Here, it is clear that any variable pointing to the same number will be
exactly the same object. The same happens for booleans, <code>None</code>, etc. You
can do things like:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; a = True
&gt;&gt;&gt; a is True
True
&gt;&gt;&gt; b = None
&gt;&gt;&gt; b is None
True
&gt;&gt;&gt; b == None
True
</code></pre>
<p>Using <code>is</code> instead of <code>==</code> has different advantages. The first is speed.
You can run the following in your command line:</p>
<pre><code class="language-bash">python -m timeit &quot;1 == 1&quot;
</code></pre>
<p>And then:</p>
<pre><code class="language-bash">python -m timeit &quot;1 is 1&quot;
</code></pre>
<p>In my case, I got that the first expression took on average 0.0207
microseconds to run, while the second took 0.0171 microseconds. Speed is
an obvious factor. The other is that when working with custom classes,
you can specify what happens when you compare them to other objects.
This is a very silly example but would prove the point:</p>
<pre><code class="language-python">class MyClass:
    def __eq__(self, other):
        return True

my_obj = MyClass()

if my_obj == None:
    print('My object == None')

if my_obj is None:
    print('My Object is None')
</code></pre>
<p>If you run the code above, the output would me <code>My Object == None</code>.
Better be safe than sorry, and being aware of what the <code>==</code> operator
means and when to use it or when to use <code>is</code> can be very important.</p>
<h2>Mutable Objects in Functions</h2>
<p>We have just seen that if you have two mutable objects with the same id
it means that they are the same object. If you change one, you will
change the other. This also applies when working with functions that
take mutable objects as arguments. Imagine that you develop a function
that takes as input a list, divides all of its arguments by 2 and then
returns the average. The function would look like this:</p>
<pre><code class="language-python">def divide_and_average(var):
    for i in range(len(var)):
        var[i] /= 2
    avg = sum(var)/len(var)
    return avg
</code></pre>
<p>It is very interesting to see what happens when you use this function:</p>
<pre><code class="language-python">my_list = [1, 2, 3]
print(divide_and_average(my_list))
print(my_list)
</code></pre>
<p>The output will be:</p>
<pre><code class="language-bash">1.0
[0.5, 1.0, 1.5]
</code></pre>
<p>When you execute the function, you are actually changing the values of
the variable <code>my_list</code>. This is very powerful because it allows you to
change the elements of a list <em>in-place</em> while you are returning a
different element. Sometimes, however, you don't want to do this and
want to preserve the value of the original list. It may seem like a good
idea to create a new variable within the function and use that instead.
For example:</p>
<pre><code class="language-python">def divide_and_average(var1):
    var = var1
    [...]
</code></pre>
<p>However, you will see that this doesn't change the output. As we saw
earlier, the identity of <code>var</code> and of <code>var1</code> would be the same. You can
make a copy of your object using the <code>copy</code> module:</p>
<pre><code class="language-python">import copy

def divide_and_average(var1):
    var = copy.copy(var1)
[...]
</code></pre>
<p>And now you will see that the original <code>my_list</code> variable is not
altered. What we have just done is called a <em>shallow copy</em> of an object.
It is also possible to perform a <em>deep</em> copy, but its implications are
left for a different article.</p>
<h2>Default Arguments in Functions</h2>
<p>A common practice when you are defining a function is to assign default
values to its arguments. On the one hand, this allows you to include new
parameters without changing the downstream code, but it also allows you
to call the function with fewer arguments and thus making it easier to
use. Let's see, for example, a function that increases the value of the
elements of a list. The code would look like:</p>
<pre><code class="language-python">def increase_values(var1=[1, 1], value=0):
    value += 1
    var1[0] += value
    var1[1] += value
    return var1
</code></pre>
<p>If you call this function without arguments, it will use the default
value <code>[1, 1]</code> for the list and the default increase value of <code>0</code>. What
happens if you use this function twice, without any arguments?</p>
<pre><code class="language-python">print(increase_values())
print(increase_values())
</code></pre>
<p>The first time it will print <code>[2, 2]</code> as expected, but the second time
it is going to print <code>[3, 3]</code>. Where you actually expecting this
outcome? This basically means that the default argument of the function
is changing every time we run it. When we run the script, Python
evaluates the function definition only once and creates the default list
and the default value. Because lists are mutable, every time you call
the function you will be changing its own values for all the successive
calls. However, the <code>value</code> is immutable, and therefore it will be
preserved over time.</p>
<p>The next logical question is how can you prevent this from happening.
And the short answer is to use immutable types as default arguments for
functions. You could have used <code>None</code>, for instance:</p>
<pre><code class="language-python">def increase_values(var1=None, value=0):
    if var1 is None:
        var1 = [1, 1]
    ...
</code></pre>
<p>Of course, the decision is always yours. Perhaps you would like to
update the default value from one call to another. Imagine the case
where you would like to perform a computationally expensive calculation,
but you don't want to run twice the function with the same input and use
a cache of values instead. You could do the following:</p>
<pre><code class="language-python">def calculate(var1, var2, cache={}):
    try:
        value = cache[var1, var2]
    except KeyError:
        value = expensive_computation(var1, var2)
        cache[var1, var2] = value
    return value
</code></pre>
<p>When we run <code>calculate</code> for the first time, there will be nothing stored
in the <code>cache</code> dictionary, but if we execute the function more than
once, <code>cache</code> will start changing, appending the new values to it. If we
run calculate again with the same arguments, they are going to be
present and their known value will be returned. Notice that we are
leveraging the <a href="https://pythonforthelab.com/blog/learning-not-to-handle-exceptions">exception
handling</a> in order to avoid
checking explicitly whether the combination of values already exists in
memory.</p>
<h2>Your Own Immutable Objects</h2>
<p>Python is very flexible and it gives you a lot of control over how to
customize its behavior. As you can see from the list at the beginning of
this article, custom created classes belong to the mutable types. But
what happens if you want to define your own immutable objects? The
answer is to modify how the class behaves when assigning attributes.
This means reimplementing the <code>__setattr__</code> method.</p>
<pre><code class="language-python">class MyImmutable:
    def __setattr__(self, key, value):
        raise TypeError('MyImmutable cannot be modified after instantiation')
</code></pre>
<p>If you instantiate the class and try to assign a value to an attribute
of it, an error will appear:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; my_immutable = MyImmutable()
&gt;&gt;&gt; my_immutable.var1 = 2
Traceback (most recent call last):
  File &quot;.\AE_custom_objects.py&quot;, line 14, in &lt;module&gt;
    my_immutable.var1 = 2
  File &quot;.\AE_custom_objects.py&quot;, line 7, in __setattr__
    raise TypeError('MyImmutable cannot be modified after instantiation')
TypeError: MyImmutable cannot be modified after instantiation
</code></pre>
<p>Great, you have an object that you can't modify after instantiation. But
that also means there is no much you can do with it. Imagine you would
like to store some initial values if you create a standard <code>__init__</code>
method, it will fail:</p>
<pre><code class="language-python">class MyImmutable:
    def __init__(self, var1, var2):
        self.var1 = var1
        self.var2 = var2
    [...]
</code></pre>
<p>As soon as you try to instantiate this class, the <code>TypeError</code> will be
raised. Even within the class itself, assigning values to attributes is
achieved through the <code>__setattr__</code> method. To bypass it, you need to use
the <code>super()</code> object:</p>
<pre><code class="language-python">class MyImmutable:
    def __init__(self, var1, var2):
        super().__setattr__('var1', var1)
        super().__setattr__('var2', var2)

    def __setattr__(self, key, value):
        raise TypeError('MyImmutable cannot be modified after instantiation')

    def __str__(self):
        return 'MyImmutable var1: {}, var2: {}'.format(self.var1, self.var2)
</code></pre>
<p>Which now you can use as follows:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; my_immutable = MyImmutable(1, 2)
&gt;&gt;&gt; print(my_immutable)
MyImmutable var1: 1, var2: 2
&gt;&gt;&gt; my_immutable.var1 = 2
[...]
TypeError: MyImmutable cannot be modified after instantiation
</code></pre>
<p>It is a bit of a workaround, but maybe you can find a use for this kind
of pattern.</p>
<h2>Conclusions</h2>
<p>Understanding the differences between mutable and immutable types in
Python does not arise as an important topic until it is too late. In
most cases, you can develop complex applications exchanging tuples for
lists, or you may even be altering the value of a variable inside a
function without realizing it and without great consequences. But it
will eventually happen that you find a bug very hard to track down that
may be related to the use (or misuse) of mutable types.</p>
<p>As a personal note, I found out such a bug performing a complex
experiment with a microscope. I wanted to be able to refocus
automatically on certain bright spots after an image was acquired. The
first time the algorithm was working fine. The second time it was pretty
much OK, but the third and onwards was not even close to reaching the
desired values. The root of the problem was defining the initial range
that the microscope would scan as a list, which was being divided by a
factor after every iteration.</p>
<p>Some of the patterns you find in this article, probably are not going to
be of any use. However, it is important to keep in the back of your mind
that <code>==</code> can give very unexpected results, that variables can change in
unexpected ways if you are not careful. When projects start to grow,
small mistakes can pile up to disastrous problems.</p>
<p>If you want to keep learning, you can read more about
why tuples may seem to change &lt;{filename}18_mutable_tuples.rst&gt;_
and what happens when you use <a href="https://pythonforthelab.com/blog/mutable-and-immutable-attributes-of-classes">mutable or immutable variables as class
attributes</a>.</p>
<p>Header Photo by
<a href="https://unsplash.com/photos/EF8Jr-uPS2Y?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">rawpixel</a>
on Unsplash</p>
        </main>
      </div>
      <div class="flex border-t text-lg px-4 pt-6 lg:pt-12 lg:mb-12">
        <div
            class="before:inset-y-1/2 before:inset-x-1 before:content-article before:h-6 before:w-6 before:inline-block before:align-middle"></div>
        <div class="pl-8 text-gray-600 font-light">Article written by Aquiles Carattino</div>
      </div>

      <div class="pt-4 pb-6 md:px-4 border-t border-gray-200 justify-center">
        <div class="bg-gray-300 font-serif text-2xl md:text-4xl text-center md:p-6 p-2">Join our newsletter!</div>
        <div class="py-4">If you liked the content, sign up to never miss an update.
        </div>
        <div id="mc_embed_signup" class="">
          <form
              action="https://pythonforthelab.us21.list-manage.com/subscribe/post?u=f0d9bfa6188cdcc67890a07f6&amp;id=8a0ca536e8&amp;f_id=00dfebe6f0"
              method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form"
              class="validate my-3 md:flex md:max-w-lg"
              target="_self" novalidate="">
            <div class="field-wp">
              <input type="email" name="EMAIL" placeholder="Your E-Mail" id="mce-EMAIL" required=""
                     value=""
                     class="required email bg-gray-100 ring-red-500 p-4 w-full md:max-w-2/3">
            </div>
            <div id="mce-responses" class="clear foot">
              <div class="response" id="mce-error-response" style="display: none;"></div>
              <div class="response" id="mce-success-response" style="display: none;"></div>
            </div>
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
              /* real people should not fill this in and expect good things - do not remove this or risk
              form
              bot
              signups */
              <input type="text" name="b_f0d9bfa6188cdcc67890a07f6_8a0ca536e8" tabindex="-1" value="">
            </div>
            <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"
                   class="bg-emerald-500 hover:scale-105 w-full focus:bg-emerald-300 text-white p-4 mt-2 md:ml-4 md:mt-0 md:w-40">
          </form>
        </div>
      </div>

        <div class="lg:mt-6">
          <h2 class="font-serif font-semibold text-2xl leading-tight">Related Articles</h2>
          <div>
              <div class="group border-b border-b-gray-400 mb-4">
                <a href="https://pythonforthelab.com/blog/mutable-and-immutable-attributes-of-classes" class="text-gray-700 hover:text-gray-900">
                  <div class="sm:flex">
                    <div class="flex-none sm:w-64 md:w-96">
                      <img class="px-2 pb-4" src="/images/dan-gold-382057-unsplash_linkedin.width-800.jpg"
                           alt="Illustration of Mutable and Immutable Attributes of Classes">
                    </div>
                    <div class="px-4 sm:flex-auto">
                      <div class="text-gray-600 text-xs p-0.5">2018-08-24</div>
                      <h3 class="font-serif leading-tight text-lg font-semibold pb-2">Mutable and Immutable Attributes of Classes</h3>
                      <div class="font-sans ">We have seen how to leverage the differences between mutable and immutable objects and what happens when you use mutable types as default function arguments. However, we haven't discussed what happens when you use mutable types as default attributes of classes. Default values for attributes can be defined in different …</div>
                      <div class="p-2 inline-block font-sm"><span
                          class="after:transition-all after:ease-in-out hover:after:translate-x-2.5 after:inline-block after:translate-x-1.5 after:w-5 group-hover:after:content-arrowBlue">Read more</span>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              <div class="group border-b border-b-gray-400 mb-4">
                <a href="https://pythonforthelab.com/blog/mutable-or-immutable-tuples" class="text-gray-700 hover:text-gray-900">
                  <div class="sm:flex">
                    <div class="flex-none sm:w-64 md:w-96">
                      <img class="px-2 pb-4" src="/images/michal-pechardo-502908-unsplash_linkedin.width-800.jpg"
                           alt="Illustration of Mutable or Immutable Tuples">
                    </div>
                    <div class="px-4 sm:flex-auto">
                      <div class="text-gray-600 text-xs p-0.5">2018-08-24</div>
                      <h3 class="font-serif leading-tight text-lg font-semibold pb-2">Mutable or Immutable Tuples</h3>
                      <div class="font-sans ">Broadly speaking, Python variables belong to one of two types: mutable and immutable. We have discussed this yesterday, in the Introduction To Mutable and Immutable Data Types. The first one refers to those elements that can be changed without the need of creating a new one, while the latter refers …</div>
                      <div class="p-2 inline-block font-sm"><span
                          class="after:transition-all after:ease-in-out hover:after:translate-x-2.5 after:inline-block after:translate-x-1.5 after:w-5 group-hover:after:content-arrowBlue">Read more</span>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              <div class="group border-b border-b-gray-400 mb-4">
                <a href="https://pythonforthelab.com/blog/deep-and-shallow-copies-of-objects" class="text-gray-700 hover:text-gray-900">
                  <div class="sm:flex">
                    <div class="flex-none sm:w-64 md:w-96">
                      <img class="px-2 pb-4" src="/images/rebecca-georgia-269933-unsplash_linkedin.width-800.jpg"
                           alt="Illustration of Deep and Shallow Copies of Objects">
                    </div>
                    <div class="px-4 sm:flex-auto">
                      <div class="text-gray-600 text-xs p-0.5">2019-02-04</div>
                      <h3 class="font-serif leading-tight text-lg font-semibold pb-2">Deep and Shallow Copies of Objects</h3>
                      <div class="font-sans ">Copying objects in Python seems like a trivial task, but it can have unexpected implications in your programs. Copying data may be achieved by either duplicating the data or by storing references to the objects, having a much lower impact on the memory. In this article, we are going to …</div>
                      <div class="p-2 inline-block font-sm"><span
                          class="after:transition-all after:ease-in-out hover:after:translate-x-2.5 after:inline-block after:translate-x-1.5 after:w-5 group-hover:after:content-arrowBlue">Read more</span>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
          </div>
        </div>
      <div class="px-2 lg:text-center lg:mt-8">
        <h4 class="text-2xl leading-tight lg:mx-auto lg:text-4xl">Share your thoughts with us!</h4>
        <div class="comments">
          <!-- Comment -->
          <script src="https://utteranc.es/client.js"
                  repo="PFTL/pftl_discussions"
                  issue-term="pathname"
                  label="Comment"
                  theme="github-light"
                  crossorigin="anonymous"
                  async>
          </script>
        </div>
      </div>
    </div>
    <div id="col-right" class="lg:w-72">
      <div class="bg-gray-300 place-items-center mt-3 p-6">
        <h3 class="font-serif text-2xl text-center mb-2 font-semibold mx-auto lg:text-xl">Support Us</h3>
        <p class="font-serif lg:text-sm leading-tight mb-2">If you like the content of this website, consider buying a
          copy of
          the book
          <strong>Python For The
            Lab</strong></p>
        <a href="https://pythonforthelab.com/books">
          <button class="bg-emerald-500 hover:scale-105 focus:bg-emerald-300 text-white p-4 mt-2 w-full md:max-w-2/3">
            Check out the books
          </button>
        </a>
      </div>

      <div class="mt-3 border border-gray-400  place-items-center">
          <h3 class="bg-gray-300 font-serif text-2xl lg:text-xl lg:font-bold text-center py-4">Latest Articles</h3>
          <ul class="mt-4">
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/how-to-use-hdf5-files-in-python" class="font-lg leading-tight hover:font-bold">
                  <div>How to use HDF5 files in Python</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2026-01-09</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/instructions-to-build-the-python-for-the-lab-daq/" class="font-lg leading-tight hover:font-bold">
                  <div>Instructions to build the Python for the Lab DAQ.</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2021-03-27</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/using-slots-in-python-limit-dynamic-attribute-creation-and-improve-speed" class="font-lg leading-tight hover:font-bold">
                  <div>Using slots in Python: limit dynamic attribute creation and improve speed</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2021-03-21</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/getting-started-with-basler-cameras" class="font-lg leading-tight hover:font-bold">
                  <div>Acquiring images from Basler Cameras</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2021-02-27</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/singletons-instantiate-objects-only-once" class="font-lg leading-tight hover:font-bold">
                  <div>Singletons: Instantiate objects only once</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2021-01-16</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/differences-between-multiprocessing-windows-and-linux" class="font-lg leading-tight hover:font-bold">
                  <div>Differences of Multiprocessing on Windows and Linux</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-06-13</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/python-tip-using-else-loops" class="font-lg leading-tight hover:font-bold">
                  <div>Python Tip: Using Else with Loops</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-05-25</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/python-tip-ready-publish-matplotlib-figures" class="font-lg leading-tight hover:font-bold">
                  <div>Python Tip: Ready to Publish Matplotlib Figures</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-05-18</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/data-descriptors-bringing-attributes-next-level" class="font-lg leading-tight hover:font-bold">
                  <div>Data Descriptors: Bringing Attributes to the Next level</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-05-16</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/python-tips-using-sets" class="font-lg leading-tight hover:font-bold">
                  <div>Python Tips: Using Sets</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-05-11</div>
                </a>
              </li>
          </ul>
      </div>
    </div>
  </div>


<!-- Footer -->
<footer class="w-full bg-black text-white p-8">
  <div class="flex flex-row flex-wrap items-center justify-center gap-y-6 gap-x-12 text-center md:justify-between">
    <img src="https://pythonforthelab.com/theme/css/images/logo-red.svg" alt="logo-ct" class="w-20" />
    <ul class="flex flex-wrap items-center gap-y-2 gap-x-8">
      <li>
        <a
          href="https://pythonforthelab.com/about"
          class="block font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased transition-colors hover:text-pink-500 focus:text-pink-500"
        >
          About Us
        </a>
      </li>
      <li>
        <a
          href="https://pythonforthelab.com/cookie-policy"
          class="block font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased transition-colors hover:text-pink-500 focus:text-pink-500"
        >
          Cookie Policy
        </a>
      </li>
      <li>
        <a
          href="https://pythonforthelab.com/privacy-policy"
          class="block font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased transition-colors hover:text-pink-500 focus:text-pink-500"
        >
          Privacy Policy
        </a>
      </li>
      <li>
        <a
          href="https://pythonforthelab.com/contact-us"
          class="block font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased transition-colors hover:text-pink-500 focus:text-pink-500"
        >
          Contact Us
        </a>
      </li>
    </ul>
  </div>
  <hr class="my-8 border-blue-gray-50" />
  <p class="block text-center font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased">
    © 2026 Python for the Lab
  </p>
</footer><script src="https://pythonforthelab.com/theme/js/prism.js"></script>
<script src="https://files.stork-search.net/releases/v1.5.0/stork.js"></script>
<script>
    stork.register("sitesearch", "https://pythonforthelab.com/search-index.st");
</script>

<script>
    $(document).ready(function () {
        responsive_menu = $('#menu');
        nav = $('nav');
        $('#menu-button').on('click', function (e) {
            e.preventDefault();
            if (responsive_menu.is(':hidden')) {
                responsive_menu.slideToggle();
                nav.addClass('bg-white');
                $("#site-logo").attr("src", "https://pythonforthelab.com/theme/css/images/logo-classic.svg");
                $('hamburger').slideToggle();
                $('#hamburger').attr('src', 'https://pythonforthelab.com/theme/css/images/cross.svg');
            } else {
                responsive_menu.slideToggle();
                nav.removeClass('bg-white');
                $("#site-logo").attr("src", "https://pythonforthelab.com/theme/css/images/logo-red.svg");
                $('#hamburger').attr('src', 'https://pythonforthelab.com/theme/css/images/hamburger.svg');
            }
        });
        position = $(window).height();
        $(window).scroll(function () {
            var currentScroll = $(window).scrollTop();
            if (currentScroll >= position) {
                $('#sticky_menu').addClass('lg:block');
            } else {
                $('#sticky_menu').removeClass('lg:block');
            }
        });
    });
</script></body>
</html>