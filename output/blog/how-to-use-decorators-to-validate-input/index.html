<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CYPVPEJ4PK"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CYPVPEJ4PK');

  </script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>How to Use Decorators to Validate Input | Python For The Lab</title>

  <meta name="tags" content="Decorators, Python, Tricks, Validation, Data, ">
  <meta name="description" content="Learn how to use decorators to validate user input before communicating
with a device
">
  <meta name="author" content="Aquiles Carattino">
  <link rel="canonical" href="blog/how-to-use-decorators-to-validate-input">

  <!-- Open Graph / Facebook -->
  <meta property="og:site_name" content="Python for the Lab">
  <meta property="og:type" content="article">
  <meta property="og:url" content="blog/how-to-use-decorators-to-validate-input">
  <meta property="og:title" content="How to Use Decorators to Validate Input">
  <meta property="og:description" content="Learn how to use decorators to validate user input before communicating
with a device
">
  <meta property="og:image" content="/images/cartoon_decorators.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="blog/how-to-use-decorators-to-validate-input">
  <meta property="twitter:title" content="How to Use Decorators to Validate Input">
  <meta property="twitter:description" content="Learn how to use decorators to validate user input before communicating
with a device
">
  <meta property="twitter:image" content="/images/cartoon_decorators.png">
  <meta name="twitter:creator" content="@aquicarattino">

  <link rel="apple-touch-icon" sizes="57x57"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180"
        href="https://pythonforthelab.com/theme/css/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"
        href="https://pythonforthelab.com/theme/css/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32"
        href="https://pythonforthelab.com/theme/css/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96"
        href="https://pythonforthelab.com/theme/css/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16"
        href="https://pythonforthelab.com/theme/css/favicon/favicon-16x16.png">
  <link rel="manifest" href="https://pythonforthelab.com/theme/css/favicon/manifest.json"/>
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://pythonforthelab.com/theme/css/favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link
      href="https://fonts.googleapis.com/css2?family=Markazi+Text:wght@400;700&family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;700&display=swap"
      rel="stylesheet">

  <link rel="stylesheet" href="https://files.stork-search.net/basic.css"/>
  <link rel="stylesheet" href="https://pythonforthelab.com/theme/css/tw_style.css">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://https://pythonforthelab.com/feed.rss">	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="https://pythonforthelab.com/theme/js/jquery-migrate-1.2.1.js"></script>

	<script src="https://pythonforthelab.com/theme/js/functions.js"></script>  <link rel="stylesheet" href="https://pythonforthelab.com/theme/css/prism.css"/>
</head>

<body class="text-gray-800">
  <header class="relative bg-gray-800 md:h-80 lg:flex h-64">
    <div class="lg:flex-col lg:lg:w-[880px] lg:ml-16">
      <nav class="lg:pr-8 w-full lg:pt-4">
        <div class="flex p-3 items-center justify-between">
          <a class="flex-none" href="https://pythonforthelab.com">
            <img id="site-logo" class="h-12"
                 src="https://pythonforthelab.com/theme/css/images/logo-red.svg"/>
          </a>
          <div id="menu_sm"
               class="pr-0 pl-4 grow hidden lg:block">
<ul
        class="w-full font-semibold text-3xl lg:flex lg:pl-16 lg:text-white md:text-base md:font-medium z-50">
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/blog"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Blog</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/courses"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Courses</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/hire-me"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Hire Me</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/books"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Books</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://pythonforthelab.com/about"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">About</span>
        </a>
    </li>
    <li class="nav-item md:grow align-middle ">
        <a href="https://github.com/PFTL/pftl_discussions/discussions"
           class="md:pt-6 md:pb-2 hover:border-b-2 hover:border-red-400">
            <span class="">Forum</span>
        </a>
    </li>
    <li class="pt-4 md:hidden">
        <form action="#" class="w-full pr-8">
            <label for="search" class="relative block">
                <img class="absolute w-4 h-4 top-1/2 -translate-y-1/2 left-3"
                     src="https://pythonforthelab.com/theme/css/images/search.svg">
                <input id="search" data-stork="sitesearch" type="text"
                       class="text-base placeholder-gray-500 pl-10 py-4 w-full shadow-sm ring-1 ring-inset ring-gray-300 focus:border-2 focus:border-red-500 focus:ring-red-500"
                       placeholder="Type to Search">
            </label>
        </form>
        <div data-stork="sitesearch-output"></div>
    </li>
</ul>          </div>
          <div class="">
            <button id="menu-button" class="z-50 border-1 border-red-500 lg:hidden">
              <img id="hamburger" src="https://pythonforthelab.com/theme/css/images/hamburger.svg"
                   class="h-8 w-8"/>
            </button>
          </div>
        </div>
        <div id="menu"
             class="pr-0 pb-8 mx-0 pt-8 pl-12 basis-full grow bg-white z-30 min-w-full hidden drop-shadow-lg border-b-8 border-b-red-700">
<ul
        class="w-full font-semibold text-3xl md:grid md:grid-cols-6 md:px-16 md:text-base md:font-medium">
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/blog"
           class="before:content-blogIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Blog</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/courses"
           class="before:content-coursesIcon md:w-full
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Courses</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/hire-me"
           class="before:content-hireIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Hire Me</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/books"
           class="before:content-booksIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Books</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://pythonforthelab.com/about"
           class="before:content-aboutIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">About</span>
        </a>
    </li>
    <li class="nav-item align-middle md:h-16 md:pl-8  md:shadow-xl md:hover:shadow-2xl md:active:shadow-none">
        <a href="https://github.com/PFTL/pftl_discussions/discussions"
           class="before:content-forumIcon
            before:inline-block before:align-middle before:h-6 before:w-6 md:py-6 md:pr-12
            before:md:h-8 before:md:w-8">
            <span class="">Forum</span>
        </a>
    </li>
    <li class="pt-4 md:hidden">
        <form action="#" class="w-full pr-8">
            <label for="search" class="relative block">
                <img class="absolute w-4 h-4 top-1/2 -translate-y-1/2 left-3"
                     src="https://pythonforthelab.com/theme/css/images/search.svg">
                <input id="search" data-stork="sitesearch" type="text"
                       class="text-base placeholder-gray-500 pl-10 py-4 w-full shadow-sm ring-1 ring-inset ring-gray-300 focus:border-2 focus:border-red-500 focus:ring-red-500"
                       placeholder="Type to Search">
            </label>
        </form>
        <div data-stork="sitesearch-output"></div>
    </li>
</ul>        </div>
      </nav>
      <div class="md:flex text-gray-200 lg:min-w-full lg:pt-4 pb-8">
      </div>
    </div>
    <div class="hidden lg:block lg:w-72 ml-1 pl-2 mr-2 pt-4 w-72">
      <div class="mb-8 shadow-2xl">
        <form action="#" class="w-full pr-8 pt-4 text-xs">
          <label for="search" class="relative block">
            <img class="absolute w-4 h-4 top-1/2 -translate-y-1/2 left-3"
                 src="https://pythonforthelab.com/theme/css/images/search.svg">
            <input id="search" data-stork="sitesearch" type="text"
                   class="text-gray-800 pl-10 bg-white py-2 placeholder-gray-500 w-full border border-gray-600"
                   placeholder="Type to Search">
          </label>
        </form>
        <div data-stork="sitesearch-output"></div>
      </div>
      <div class="py-2 shadow-2xl">
        <div class="text-gray-300">
          <span class="font-semibold text-sm">Get all the information directly to your inbox.</span>
        </div>
        <div id="mc_embed_signup" class="">
          <form
              action="https://pythonforthelab.us21.list-manage.com/subscribe/post?u=f0d9bfa6188cdcc67890a07f6&amp;id=8a0ca536e8&amp;f_id=00dfebe6f0"
              method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form"
              class="validate my-3 md:max-w-lg"
              target="_self" novalidate="">
            <div class="field-wp">
              <input type="email" name="EMAIL" placeholder="Your E-Mail" id="mce-EMAIL" required=""
                     value=""
                     class="required email bg-white ring-red-500 p-2 w-full md:max-w-2/3">
            </div>
            <div id="mce-responses" class="clear foot">
              <div class="response" id="mce-error-response" style="display: none;"></div>
              <div class="response" id="mce-success-response" style="display: none;"></div>
            </div>
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
              /* real people should not fill this in and expect good things - do not remove this or risk
              form
              bot
              signups */
              <input type="text" name="b_f0d9bfa6188cdcc67890a07f6_8a0ca536e8" tabindex="-1" value="">
            </div>
            <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"
                   class="bg-emerald-500 hover:scale-105 focus:bg-emerald-300 text-white p-4 mt-2 w-full md:max-w-2/3">
          </form>
          <span class="text-gray-400 text-xs">Unsubscribe any time.</span>
        </div>
      </div>
    </div>
  </header>

  <div class="lg:mx-auto lg:flex lg:ml-16">

    <div id="col-left" class="md:content-stretch lg:w-[880px]">
      <div class="relative text-gray-800 mx-2 z-40">
        <div class="md:-mt-32 lg:-mt-56 -mt-36 lg:mb-8">
          <img src="/images/cartoon_decorators.png" alt="How to Use Decorators to Validate Input" class="shadow-md lg:shadow-lg"/>
        </div>
        <h1 class="font-serif font-extrabold text-4xl leading-tight pb-2">How to Use Decorators to Validate Input</h1>
        <div class="font-sans font-bold text-xl">Learn how to use decorators to validate user input before communicating
with a device
</div>
        <div class="text-sm text-gray-400">
          <span
              class="inline-block before:inline-block before:mx-1 before:align-middle before:h-4 before:w-4 before:content-profile mr-1 pr-1 py-1">Aquiles Carattino</span>
          <span
              class="inline-block before:inline-block before:mx-1 before:align-middle before:h-4 before:w-4 before:content-calendar mr-1 pr-1 py-1">2018-03-12</span>
          <span
              class="inline-block before:inline-block before:mx-1 before:align-middle before:h-4 before:w-4 before:content-tag mr-1 pr-1 py-1">
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Decorators</span>
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Python</span>
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Tricks</span>
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Validation</span>
              <span class="bg-gray-300 rounded text-white px-0.5 mr-0.5 ">Data</span>
        </span>
        </div>
      </div>

      <div class="article-content mt-4 mx-2">
        <main>
          <p>Python is rich in resources that can shorten the time it takes to
develop new programs and simplify repetitive tasks. Decorators are one
of such elements but more often than not they are not considered by less
experienced developers. Adding decorators to the syntactic toolbox can
be of great use in different contexts, and in this article, we are going
to discuss how can they help you when communicating with a device. The
example code can be found in our <a href="https://github.com/PFTL/website_example_code/tree/master/pftl_code/code/01_Decorators">Github
repository</a>.</p>
<p>Decorators in Python are nothing more than functions that take as
arguments other functions. They appear with an <code>@</code> in front of them
right above a function (or a method within a class). Let's quickly recap
how functions work in Python and how to use them. Imagine you want to
compute the average of two values. We can develop a function for it:</p>
<pre><code class="language-python">def average(x, y):
   avg = (x+y)/2
   return avg
</code></pre>
<p>We can use the function directly in our code by writing:</p>
<pre><code class="language-python">a = 1
b = 3
result = average(1, 3)
print(result)
</code></pre>
<p>What you should see happening is that when you call the function
<code>average</code> it adds both numbers and returns their mean value. Imagine
that, for some reason, you want to allow only positive numbers as
arguments of your function. You can expand the <code>average</code> function to
check whether it is true or not.</p>
<pre><code class="language-python">def average(x, y):
   if x&lt;0 or y&lt;0:
      raise Exception(&quot;Both x and y have to be positive&quot;)

   avg = (x + y)/2
   return avg
</code></pre>
<p>Every time someone wants to use the function with a negative argument,
an error will be raised. Later, we are asked to develop a new function
to compute the geometric average of two numbers, and we need them both
to be positive. Our function will look like this:</p>
<pre><code class="language-python">import math

def geom_average(x, y):
   if x&lt;0 or y&lt;0:
      raise Exception(&quot;Both x and y have to be positive&quot;)

   avg = math.sqrt(x*y)
   return avg
</code></pre>
<p>There is a general rule of thumb that says that code shouldn't be copied
more than twice. If you are going to copy-paste code for the third time
there is probably a better way of doing it. In the examples above, you
can see that the verification of the input is exactly the same in both
functions. If we were to write a third function, we would meet the
three-copies rule. It would be useful to have an external way of
checking that both inputs are positive, and this is exactly what
decorators are meant to do.</p>
<h2>Functions as arguments and as outputs of other functions</h2>
<p>Before we can go into the details of how to use <code>decorators</code> in Python,
it is important to show how functions work with inputs and outputs that
are other functions. For example, we could define a function that
transforms the output of the averages defined above into integers. It is
a very simplistic example but already shows the pattern that you can
follow to achieve more complex behaviors.</p>
<pre><code class="language-python">def integer_output(func, x, y):
   res = func(x, y)
   return int(res)
</code></pre>
<p>In the code above, you can see that <code>integer_output</code> takes three
arguments, a function <code>func</code> and two numbers, <code>x</code> and <code>y</code> . We use the
function, regardless of what it is, with arguments <code>x</code> and <code>y</code>. It then
returns the result of <code>func</code> converted to an integer value.
<code>integer_output</code> can be used like this:</p>
<pre><code class="language-python">rounded = integer_output(average, 1, 2)
print(rounded)
geom_rounded = integer_output(geom_average, 4, 5)
print(geom_rounded)
</code></pre>
<p>It is important to note that the first argument is a function and it
doesn't matter which one. You could use <code>average</code> or <code>geom_average</code>. The
next two arguments are going to be passed directly to <code>func</code> . This is
already quite powerful and most likely you can think a lot of ways in
which you can use it, but Python allows you to do even more interesting
things.</p>
<p>Functions can also be defined within functions and you can use them
based on your input arguments. For example, let's assume you want to use
<code>average</code> only if the sum of x and y is even and the <code>geom_average</code> if
the sum is odd:</p>
<pre><code class="language-python">def even_odd_average(x, y):
   def average(a, b):
      return (a+b)/2
   def geom_average(a, b):
      return math.sqrt(a*b)

   if (x+y) % 2 == 0:
      return average(x, y)
   else:
      return geom_average(x, y)
</code></pre>
<p>The function <code>even_odd_average</code> takes only two arguments on which it is
going to perform the average. Inside we define two functions, exactly as
we did earlier, <code>average</code> and <code>geom_average</code>, but this time they are
available only within the <code>even_odd_average</code> function. Based on the
input from the user, we either calculate the average or the geometric
average as requested earlier and we return the value. We can use this
function as:</p>
<pre><code class="language-python">print(even_odd_average(4, 6))
print(even_odd_average(4, 9))
</code></pre>
<p>So far, we have seen how to use functions as arguments in other
functions and how to define functions within functions. The only missing
part is to be able to return a function instead of a value. Let's assume
you want to print the time it takes to calculate the average between two
numbers, but you don't want to re-write your original function. We have
to write a function wrapper.</p>
<pre><code class="language-python">import time

def timing_average(func):
   def wrapper(x, y):
      t0 = time.time()
      res = func(x, y)
      t1 = time.time()
      print(&quot;It took {} seconds to calculate the average&quot;.format(t1-t0))
      return res

   return wrapper
</code></pre>
<p>We start by defining a function that takes as an argument another
function. We also define a new function called <code>wrapper</code> as we explained
earlier. So far, both steps were done in the previous examples, but now
we are going to use <code>func</code> within the <code>wrapper</code>. We start by storing the
current time at the variable <code>t0</code>. We execute the function <code>func</code> with
the arguments <code>x</code> and <code>y</code> and store the new time at <code>t1</code>. We print the
total time it took to run the function and return the output of <code>func</code>.
The important part here is the very last line. As you can see, we are
not returning the value that <code>func</code> returns, but we are actually
returning the <code>wrapper</code>, which is in itself a function. To see this in
action, we can do the following:</p>
<pre><code class="language-python">new = timing_average(average)
new(2, 4)
</code></pre>
<p>What you see in the above code is that we create a function called <code>new</code>
by using <code>timing_average</code> with only one argument, the function
<code>average</code>. <code>New</code> will take the same inputs that the <code>wrapper</code> function
takes. If we use <code>new</code> as a function, with arguments <code>2</code> and <code>4</code> , you
will see that it prints to screen the total time it took to calculate
the average. <code>new</code> is nothing more than the function <code>wrapper</code>, defined
using <code>average</code>. We could do the same using <code>geom_average</code>:</p>
<pre><code class="language-python">new_geom = timing_average(geom_average)
new_geom(4,5)
</code></pre>
<p>The syntax above can be hard to understand and forces you to define new
functions to add timing capabilities. When you see that you are
assigning the output of <code>timing_average</code> to a variable called <code>new</code> you
don't expect it to actually be a function. If you already have working
code, you need to do a lot of refactoring in order to define and use the
new functions.</p>
<p>Fortunately, Python offers a very clear and simple way of achieving the
same functionality, without the downsides just said. If you managed to
follow the above examples, you are ready to improve the way the code
looks like by using <em>Python syntactic sugar</em>.</p>
<h2>Syntactic Sugar for Decorators</h2>
<p>You already know almost everything there is to know regarding how to use
decorators, you are just missing the syntactic sugar of Python. With
what you have already done, you can improve the style of your code quite
easily. Assuming you want to add timing capabilities to your average or
geometrical average function, you can simply do:</p>
<pre><code class="language-python">@timing_average
def average(x, y):
   return (x+y)/2
</code></pre>
<p>By simply adding <code>@timing_average</code> before your function, you are now
able to use <code>average</code> as always, but printing the time it takes to
calculate it. The obvious advantage of this syntax is that it allows you
to add an interesting new functionality without altering your downstream
code. You don't need to define a new function, you only need to add one
line of code before the definition of your <code>average</code>. It runs as always:</p>
<pre><code class="language-python">avg = average(4, 6)
print('The average between 4 and 6 is {}'.format(avg))
</code></pre>
<p>Coming back to the examples of the averages that take only positive
arguments, and building on the example of <code>timing_average</code>, we can
develop a wrapper function that would check whether the input of our
function is positive or not.</p>
<pre><code class="language-python">def check_positive(func):
   def func_wrapper(x, y):
      if x&lt;0 or y&lt;0:
         raise Exception(&quot;Both x and y have to be positive for function {} to work&quot;.format(func.__name__))
      res = func(x,y)
      return res
   return func_wrapper
</code></pre>
<p>The structure of <code>check_positive</code> is very similar to what we have done
for the timing. The only difference is that we check the input arguments
and we raise an <code>Exception</code> if they are not both positive. Since we are
raising an exception for an unknown function, it becomes handy to
display which function actually gave the error. We achieve that by using
<code>func.__name__</code>, which will tell us the name of the function. The rest
is exactly the same as with the timing example. We can write our average
functions as follows:</p>
<pre><code class="language-python">@check_positive
def average(x, y):
   return (x + y)/2

@check_positive
def geom_average(x, y):
   return math.sqrt(x*y)
</code></pre>
<p>Both functions, <code>average</code> and <code>geom_average</code> don't change their names,
therefore you can use them as always, but they will check for positive
input before computing the average:</p>
<pre><code class="language-python">average(2, 4)
average(-2, 4)
geom_average(4, 9)
geom_average(-4, 10)
</code></pre>
<p>Decorators can also be combined, you can time a function AND request the
inputs to be positive:</p>
<pre><code class="language-python">@timing_average
@check_positive
def average(x, y):
   return (x + y)/2
</code></pre>
<p>You can play around and see what happens if you change the order of the
decorators. Importantly, if you use <code>func.__name__</code> to print the name of
the function that raised the <code>Exception</code> within a decorator, you can see
that the name can change and become the name of the wrapper. In most
cases this is not a desired situation because you won't be able to debug
what is the real function giving troubles, you will just get the name of
the decorator. However, this is a more subtle topic that will be covered
in the future.</p>
<p>Decorators are very powerful and can help you develop very clean and
useful code. The obvious application of decorators is to validate the
input provided by the user. Decorators are also very useful when you are
writing a library that other developers are going to use. Or when you
want to alter the behavior of a method or function in a systematic way.
For example, you could use some cache in order to avoid running the same
function with the same arguments over and over again.</p>
<p>One of the advantages of decorators is that even if a developer doesn't
fully understand what it is happening under the hood, it will for sure
understand how to use them and what to expect. If you provide good
examples in your code it will become apparent where and when to include
specific decorators. Now that you have a basic understanding of what the
<code>@</code> means in Python you can start thinking about many more interesting
applications.</p>
<p>In this article, we have shown a couple of very basic examples that can
be greatly improved. If you have ever encountered decorators and didn't
understand how to use them, or you are looking for more specific
information, leave your message in the comment section below, and we will
use your feedback to write a follow-up article specifically designed to
answer your questions.</p>
        </main>
      </div>
      <div class="flex border-t text-lg px-4 pt-6 lg:pt-12 lg:mb-12">
        <div
            class="before:inset-y-1/2 before:inset-x-1 before:content-article before:h-6 before:w-6 before:inline-block before:align-middle"></div>
        <div class="pl-8 text-gray-600 font-light">Article written by Aquiles Carattino</div>
      </div>

      <div class="pt-4 pb-6 md:px-4 border-t border-gray-200 justify-center">
        <div class="bg-gray-300 font-serif text-2xl md:text-4xl text-center md:p-6 p-2">Join our newsletter!</div>
        <div class="py-4">If you liked the content, sign up to never miss an update.
        </div>
        <div id="mc_embed_signup" class="">
          <form
              action="https://pythonforthelab.us21.list-manage.com/subscribe/post?u=f0d9bfa6188cdcc67890a07f6&amp;id=8a0ca536e8&amp;f_id=00dfebe6f0"
              method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form"
              class="validate my-3 md:flex md:max-w-lg"
              target="_self" novalidate="">
            <div class="field-wp">
              <input type="email" name="EMAIL" placeholder="Your E-Mail" id="mce-EMAIL" required=""
                     value=""
                     class="required email bg-gray-100 ring-red-500 p-4 w-full md:max-w-2/3">
            </div>
            <div id="mce-responses" class="clear foot">
              <div class="response" id="mce-error-response" style="display: none;"></div>
              <div class="response" id="mce-success-response" style="display: none;"></div>
            </div>
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
              /* real people should not fill this in and expect good things - do not remove this or risk
              form
              bot
              signups */
              <input type="text" name="b_f0d9bfa6188cdcc67890a07f6_8a0ca536e8" tabindex="-1" value="">
            </div>
            <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"
                   class="bg-emerald-500 hover:scale-105 w-full focus:bg-emerald-300 text-white p-4 mt-2 md:ml-4 md:mt-0 md:w-40">
          </form>
        </div>
      </div>

        <div class="lg:mt-6">
          <h2 class="font-serif font-semibold text-2xl leading-tight">Related Articles</h2>
          <div>
              <div class="group border-b border-b-gray-400 mb-4">
                <a href="blog/how-to-use-decorators-part-2" class="text-gray-700 hover:text-gray-900">
                  <div class="sm:flex">
                    <div class="flex-none sm:w-64 md:w-96">
                      <img class="px-2 pb-4" src="/images/michael-browning-227688-unsplash_linkedin.width-800.jpg"
                           alt="Illustration of How to use decorators Part 2">
                    </div>
                    <div class="px-4 sm:flex-auto">
                      <div class="text-gray-600 text-xs p-0.5">2018-05-18</div>
                      <h3 class="font-serif leading-tight text-lg font-semibold pb-2">How to use decorators Part 2</h3>
                      <div class="font-sans ">Decorators are a very useful programming pattern that allows changing the behavior of functions with little refactoring. Decorators allow developers to abstract common options from functions, but mastering their use in Python can be challenging. In this article, we are going to go in depth regarding different options when implementing …</div>
                      <div class="p-2 inline-block font-sm"><span
                          class="after:transition-all after:ease-in-out hover:after:translate-x-2.5 after:inline-block after:translate-x-1.5 after:w-5 group-hover:after:content-arrowBlue">Read more</span>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              <div class="group border-b border-b-gray-400 mb-4">
                <a href="blog/virtual-environment-is-a-must-have-tool" class="text-gray-700 hover:text-gray-900">
                  <div class="sm:flex">
                    <div class="flex-none sm:w-64 md:w-96">
                      <img class="px-2 pb-4" src="/images/virtual_environments_python.png"
                           alt="Illustration of Virtual Environment is a Must-Have Tool">
                    </div>
                    <div class="px-4 sm:flex-auto">
                      <div class="text-gray-600 text-xs p-0.5">2018-03-09</div>
                      <h3 class="font-serif leading-tight text-lg font-semibold pb-2">Virtual Environment is a Must-Have Tool</h3>
                      <div class="font-sans ">When you start developing software, it is of utmost importance to have an isolated programming environment in which you can control precisely the packages installed. This will allow you, for example, to use experimental libraries without overwriting software that other programs use on your computer. Isolated environments allow you, for …</div>
                      <div class="p-2 inline-block font-sm"><span
                          class="after:transition-all after:ease-in-out hover:after:translate-x-2.5 after:inline-block after:translate-x-1.5 after:w-5 group-hover:after:content-arrowBlue">Read more</span>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              <div class="group border-b border-b-gray-400 mb-4">
                <a href="blog/mutable-and-immutable-objects" class="text-gray-700 hover:text-gray-900">
                  <div class="sm:flex">
                    <div class="flex-none sm:w-64 md:w-96">
                      <img class="px-2 pb-4" src="/images/rawpixel-274862-unsplash_linkedin.width-800.jpg"
                           alt="Illustration of Mutable and Immutable Objects">
                    </div>
                    <div class="px-4 sm:flex-auto">
                      <div class="text-gray-600 text-xs p-0.5">2018-08-23</div>
                      <h3 class="font-serif leading-tight text-lg font-semibold pb-2">Mutable and Immutable Objects</h3>
                      <div class="font-sans ">People who start programming in Python quickly stumble upon the existence of lists and tuples. They are defined in a similar way, they look the same. Sometimes they are even used interchangeably. The obvious question is, therefore, why do you have two different types of elements for the same goal …</div>
                      <div class="p-2 inline-block font-sm"><span
                          class="after:transition-all after:ease-in-out hover:after:translate-x-2.5 after:inline-block after:translate-x-1.5 after:w-5 group-hover:after:content-arrowBlue">Read more</span>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
          </div>
        </div>
      <div class="px-2 lg:text-center lg:mt-8">
        <h4 class="text-2xl leading-tight lg:mx-auto lg:text-4xl">Share your thoughts with us!</h4>
        <div class="comments">
          <!-- Comment -->
          <script src="https://utteranc.es/client.js"
                  repo="PFTL/pftl_discussions"
                  issue-term="pathname"
                  label="Comment"
                  theme="github-light"
                  crossorigin="anonymous"
                  async>
          </script>
        </div>
      </div>
    </div>
    <div id="col-right" class="lg:w-72">
      <div class="bg-gray-300 place-items-center mt-3 p-6">
        <h3 class="font-serif text-2xl text-center mb-2 font-semibold mx-auto lg:text-xl">Support Us</h3>
        <p class="font-serif lg:text-sm leading-tight mb-2">If you like the content of this website, consider buying a
          copy of
          the book
          <strong>Python For The
            Lab</strong></p>
        <a href="https://pythonforthelab.com/books">
          <button class="bg-emerald-500 hover:scale-105 focus:bg-emerald-300 text-white p-4 mt-2 w-full md:max-w-2/3">
            Check out the books
          </button>
        </a>
      </div>

      <div class="mt-3 border border-gray-400  place-items-center">
          <h3 class="bg-gray-300 font-serif text-2xl lg:text-xl lg:font-bold text-center py-4">Latest Articles</h3>
          <ul class="mt-4">
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/instructions-to-build-the-python-for-the-lab-daq/" class="font-lg leading-tight hover:font-bold">
                  <div>Instructions to build the Python for the Lab DAQ.</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2021-03-27</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/using-slots-in-python-limit-dynamic-attribute-creation-and-improve-speed" class="font-lg leading-tight hover:font-bold">
                  <div>Using slots in Python: limit dynamic attribute creation and improve speed</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2021-03-21</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/getting-started-with-basler-cameras" class="font-lg leading-tight hover:font-bold">
                  <div>Acquiring images from Basler Cameras</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2021-02-27</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/singletons-instantiate-objects-only-once" class="font-lg leading-tight hover:font-bold">
                  <div>Singletons: Instantiate objects only once</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2021-01-16</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/differences-between-multiprocessing-windows-and-linux" class="font-lg leading-tight hover:font-bold">
                  <div>Differences of Multiprocessing on Windows and Linux</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-06-13</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/python-tip-using-else-loops" class="font-lg leading-tight hover:font-bold">
                  <div>Python Tip: Using Else with Loops</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-05-25</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/python-tip-ready-publish-matplotlib-figures" class="font-lg leading-tight hover:font-bold">
                  <div>Python Tip: Ready to Publish Matplotlib Figures</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-05-18</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/data-descriptors-bringing-attributes-next-level" class="font-lg leading-tight hover:font-bold">
                  <div>Data Descriptors: Bringing Attributes to the Next level</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-05-16</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/python-tips-using-sets" class="font-lg leading-tight hover:font-bold">
                  <div>Python Tips: Using Sets</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-05-11</div>
                </a>
              </li>
              <li class="mx-4 p-3 border-b border-b-gray-400">
                <a href="https://pythonforthelab.com/blog/generators-iterables-iterators-python-when-and-where" class="font-lg leading-tight hover:font-bold">
                  <div>Generators, Iterables, Iterators in Python: When and Where</div>
                  <div class="font-light text-gray-600 text-sm">
                    by Aquiles Carattino, 2020-04-10</div>
                </a>
              </li>
          </ul>
      </div>
    </div>
  </div>


<!-- Footer -->
<footer class="w-full bg-black text-white p-8">
  <div class="flex flex-row flex-wrap items-center justify-center gap-y-6 gap-x-12 text-center md:justify-between">
    <img src="https://pythonforthelab.com/theme/css/images/logo-red.svg" alt="logo-ct" class="w-20" />
    <ul class="flex flex-wrap items-center gap-y-2 gap-x-8">
      <li>
        <a
          href="https://pythonforthelab.com/about"
          class="block font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased transition-colors hover:text-pink-500 focus:text-pink-500"
        >
          About Us
        </a>
      </li>
      <li>
        <a
          href="https://pythonforthelab.com/cookie-policy"
          class="block font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased transition-colors hover:text-pink-500 focus:text-pink-500"
        >
          Cookie Policy
        </a>
      </li>
      <li>
        <a
          href="https://pythonforthelab.com/privacy-policy"
          class="block font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased transition-colors hover:text-pink-500 focus:text-pink-500"
        >
          Privacy Policy
        </a>
      </li>
      <li>
        <a
          href="https://pythonforthelab.com/contact-us"
          class="block font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased transition-colors hover:text-pink-500 focus:text-pink-500"
        >
          Contact Us
        </a>
      </li>
    </ul>
  </div>
  <hr class="my-8 border-blue-gray-50" />
  <p class="block text-center font-sans text-base font-normal leading-relaxed text-blue-gray-200 antialiased">
    © 2023 Python for the Lab
  </p>
</footer><script src="https://pythonforthelab.com/theme/js/prism.js"></script>
<script src="https://files.stork-search.net/releases/v1.5.0/stork.js"></script>
<script>
    stork.register("sitesearch", "https://pythonforthelab.com/search-index.st");
</script>

<script>
    $(document).ready(function () {
        responsive_menu = $('#menu');
        nav = $('nav');
        $('#menu-button').on('click', function (e) {
            e.preventDefault();
            if (responsive_menu.is(':hidden')) {
                responsive_menu.slideToggle();
                nav.addClass('bg-white');
                $("#site-logo").attr("src", "https://pythonforthelab.com/theme/css/images/logo-classic.svg");
                $('hamburger').slideToggle();
                $('#hamburger').attr('src', 'https://pythonforthelab.com/theme/css/images/cross.svg');
            } else {
                responsive_menu.slideToggle();
                nav.removeClass('bg-white');
                $("#site-logo").attr("src", "https://pythonforthelab.com/theme/css/images/logo-red.svg");
                $('#hamburger').attr('src', 'https://pythonforthelab.com/theme/css/images/hamburger.svg');
            }
        });
        position = $(window).height();
        $(window).scroll(function () {
            var currentScroll = $(window).scrollTop();
            if (currentScroll >= position) {
                $('#sticky_menu').addClass('lg:block');
            } else {
                $('#sticky_menu').removeClass('lg:block');
            }
        });
    });
</script></body>
</html>